# LBS IoT å‰ç«¯åº”ç”¨ - é«˜å¾·åœ°å›¾é›†æˆ

åŸºäºReactå’Œé«˜å¾·åœ°å›¾APIçš„ç‰©è”ç½‘è®¾å¤‡ä½ç½®å¯è§†åŒ–å‰ç«¯åº”ç”¨ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶ï¼š
```bash
cp env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®é«˜å¾·åœ°å›¾APIå¯†é’¥ï¼š
```env
# é«˜å¾·åœ°å›¾APIé…ç½®
REACT_APP_AMAP_API_KEY=your_amap_api_key_here
REACT_APP_AMAP_SECURITY_CODE=your_amap_security_code_here

# APIæœåŠ¡é…ç½®
REACT_APP_API_BASE_URL=http://localhost:3000
REACT_APP_WS_URL=ws://localhost:3000

# MQTTé…ç½®
REACT_APP_MQTT_BROKER=ws://localhost:8083/mqtt
```

### 3. è·å–é«˜å¾·åœ°å›¾APIå¯†é’¥

1. è®¿é—® [é«˜å¾·å¼€æ”¾å¹³å°](https://lbs.amap.com/)
2. æ³¨å†Œå¹¶ç™»å½•è´¦å·
3. åˆ›å»ºåº”ç”¨ï¼Œé€‰æ‹©ã€ŒWebç«¯(JS API)ã€
4. è·å–API Keyå’Œå®‰å…¨å¯†é’¥
5. å°†å¯†é’¥é…ç½®åˆ° `.env` æ–‡ä»¶ä¸­

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

#### æ–¹å¼ä¸€ï¼šåŒæ—¶å¯åŠ¨å‰åç«¯
```bash
npm run dev:all
```

#### æ–¹å¼äºŒï¼šåˆ†åˆ«å¯åŠ¨
```bash
# å¯åŠ¨åç«¯APIæœåŠ¡å™¨ (ç«¯å£3000)
npm run dev:backend

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (ç«¯å£3001)
npm run dev:frontend
```

### 5. è®¿é—®åº”ç”¨

- å‰ç«¯åº”ç”¨: http://localhost:3001
- åç«¯API: http://localhost:3000/api

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/frontend/
â”œâ”€â”€ components/          # Reactç»„ä»¶
â”‚   â””â”€â”€ AmapComponent.jsx   # é«˜å¾·åœ°å›¾ç»„ä»¶
â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ AmapService.js     # é«˜å¾·åœ°å›¾æœåŠ¡
â”‚   â”œâ”€â”€ ConfigService.js   # é…ç½®æœåŠ¡
â”‚   â””â”€â”€ IoTDataService.js  # IoTæ•°æ®æœåŠ¡
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ MapPage.jsx        # åœ°å›¾ä¸»é¡µé¢
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ assets/             # é™æ€èµ„æº
â”œâ”€â”€ public/             # å…¬å…±æ–‡ä»¶
â”‚   â””â”€â”€ index.html         # HTMLæ¨¡æ¿
â”œâ”€â”€ App.jsx             # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ App.css             # åº”ç”¨æ ·å¼
â”œâ”€â”€ index.js            # åº”ç”¨å…¥å£
â””â”€â”€ index.css           # åŸºç¡€æ ·å¼
```

## ğŸ—ºï¸ åŠŸèƒ½ç‰¹æ€§

### åœ°å›¾åŠŸèƒ½
- âœ… é«˜å¾·åœ°å›¾åˆå§‹åŒ–å’Œæ˜¾ç¤º
- âœ… è®¾å¤‡ä½ç½®æ ‡è®°æ˜¾ç¤º
- âœ… æ—¶é—´åºåˆ—è½¨è¿¹ç»˜åˆ¶
- âœ… åœ°å›¾æ§ä»¶ï¼ˆç¼©æ”¾ã€å·¥å…·æ ï¼‰
- âœ… ä¿¡æ¯çª—å£æ˜¾ç¤ºè®¾å¤‡è¯¦æƒ…
- âœ… åœ°ç†ç¼–ç å’Œé€†åœ°ç†ç¼–ç 
- âœ… POIæœç´¢åŠŸèƒ½

### IoTæ•°æ®åŠŸèƒ½
- âœ… å®æ—¶è®¾å¤‡ä½ç½®æ›´æ–°
- âœ… è®¾å¤‡çŠ¶æ€ç›‘æ§
- âœ… å†å²è½¨è¿¹æŸ¥è¯¢
- âœ… WebSocketå®æ—¶é€šä¿¡
- âœ… MQTTæ¶ˆæ¯å¤„ç†ï¼ˆæ¨¡æ‹Ÿï¼‰
- âœ… è®¾å¤‡åˆ—è¡¨ç®¡ç†

### ç”¨æˆ·ç•Œé¢
- âœ… å“åº”å¼è®¾è®¡
- âœ… è®¾å¤‡é¢æ¿ä¾§è¾¹æ 
- âœ… å®æ—¶è¿æ¥çŠ¶æ€æ˜¾ç¤º
- âœ… æ—¶é—´èŒƒå›´é€‰æ‹©
- âœ… è®¾å¤‡ç­›é€‰å’Œæœç´¢
- âœ… å·¥å…·æ æ“ä½œ

## ğŸ”§ å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆå‰åç«¯åŒæ—¶å¯åŠ¨ï¼‰
npm run dev:all

# ä»…å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev:frontend

# ä»…å¯åŠ¨åç«¯æœåŠ¡å™¨
npm run dev:backend

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build:frontend

# è¿è¡Œæµ‹è¯•
npm run test:frontend

# ä»£ç æ£€æŸ¥
npm run lint

# ä»£ç æ ¼å¼åŒ–
npm run lint:fix

# æ¸…ç†æ„å»ºæ–‡ä»¶
npm run clean
```

## ğŸŒ APIæ¥å£

### é…ç½®æ¥å£
- `GET /api/config` - è·å–åº”ç”¨é…ç½®

### è®¾å¤‡æ¥å£
- `GET /api/devices` - è·å–æ‰€æœ‰è®¾å¤‡
- `GET /api/devices/:deviceId` - è·å–ç‰¹å®šè®¾å¤‡ä¿¡æ¯
- `GET /api/devices/:deviceId/history` - è·å–è®¾å¤‡å†å²ä½ç½®

### WebSocketäº‹ä»¶
- `device_location_update` - è®¾å¤‡ä½ç½®æ›´æ–°
- `device_status_update` - è®¾å¤‡çŠ¶æ€æ›´æ–°
- `historical_data` - å†å²æ•°æ®å“åº”
- `system_alert` - ç³»ç»Ÿå‘Šè­¦

## ğŸ“± ä½¿ç”¨è¯´æ˜

### 1. æŸ¥çœ‹è®¾å¤‡åˆ—è¡¨
- å·¦ä¾§é¢æ¿æ˜¾ç¤ºæ‰€æœ‰åœ¨çº¿è®¾å¤‡
- è®¾å¤‡çŠ¶æ€ç”¨é¢œè‰²åŒºåˆ†ï¼ˆç»¿è‰²=åœ¨çº¿ï¼Œçº¢è‰²=ç¦»çº¿ï¼Œé»„è‰²=å‘Šè­¦ï¼‰
- æ˜¾ç¤ºè®¾å¤‡ä½ç½®ç‚¹æ•°é‡å’Œæœ€åæ›´æ–°æ—¶é—´

### 2. æŸ¥çœ‹è®¾å¤‡è½¨è¿¹
- ç‚¹å‡»è®¾å¤‡åˆ—è¡¨ä¸­çš„è®¾å¤‡
- åœ°å›¾ä¸Šä¼šæ˜¾ç¤ºè¯¥è®¾å¤‡çš„å†å²è½¨è¿¹
- å¯ä»¥é€‰æ‹©ä¸åŒçš„æ—¶é—´èŒƒå›´ï¼ˆ1å°æ—¶ã€6å°æ—¶ã€24å°æ—¶ã€7å¤©ï¼‰

### 3. åœ°å›¾æ“ä½œ
- é¼ æ ‡æ»šè½®ç¼©æ”¾åœ°å›¾
- æ‹–æ‹½ç§»åŠ¨åœ°å›¾è§†è§’
- ç‚¹å‡»è®¾å¤‡æ ‡è®°æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
- ä½¿ç”¨å·¥å…·æ æŒ‰é’®æ§åˆ¶æ˜¾ç¤º

### 4. å®æ—¶ç›‘æ§
- è®¾å¤‡ä½ç½®ä¼šå®æ—¶æ›´æ–°
- è¿æ¥çŠ¶æ€æ˜¾ç¤ºåœ¨è®¾å¤‡é¢æ¿é¡¶éƒ¨
- æ–°çš„ä½ç½®ç‚¹ä¼šè‡ªåŠ¨æ·»åŠ åˆ°è½¨è¿¹ä¸­

## ğŸ”§ é…ç½®è¯´æ˜

### é«˜å¾·åœ°å›¾é…ç½®
```javascript
{
  api_key: 'your_api_key',           // APIå¯†é’¥
  security_js_code: 'your_code',     // å®‰å…¨å¯†é’¥
  version: '2.0',                    // APIç‰ˆæœ¬
  plugins: [...],                    // æ’ä»¶åˆ—è¡¨
  default_center: { lng, lat },      // é»˜è®¤ä¸­å¿ƒç‚¹
  default_zoom: 12,                  // é»˜è®¤ç¼©æ”¾çº§åˆ«
  map_style: 'amap://styles/normal', // åœ°å›¾æ ·å¼
  view_mode: '3D'                    // è§†å›¾æ¨¡å¼
}
```

### WebSocketé…ç½®
```javascript
{
  url: 'ws://localhost:3000',        // WebSocketåœ°å€
  reconnect_interval: 5000,          // é‡è¿é—´éš”
  max_reconnect_attempts: 10         // æœ€å¤§é‡è¿æ¬¡æ•°
}
```

## ğŸ› æ•…éšœæ’é™¤

### 1. åœ°å›¾æ— æ³•åŠ è½½
- æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®
- ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### 2. è®¾å¤‡æ•°æ®ä¸æ˜¾ç¤º
- ç¡®è®¤åç«¯æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥WebSocketè¿æ¥çŠ¶æ€
- æŸ¥çœ‹ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸ

### 3. æ„å»ºå¤±è´¥
- åˆ é™¤ `node_modules` æ–‡ä»¶å¤¹
- é‡æ–°è¿è¡Œ `npm install`
- æ£€æŸ¥Node.jsç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Node.js >= 16.0.0
- npm >= 8.0.0
- ç°ä»£æµè§ˆå™¨ï¼ˆChrome, Firefox, Safari, Edgeï¼‰

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰ç–‘é—®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æœç´¢ç°æœ‰çš„ [Issues](https://github.com/your-repo/issues)
3. åˆ›å»ºæ–°çš„ Issue æè¿°æ‚¨çš„é—®é¢˜

## ğŸ”— ç›¸å…³é“¾æ¥

- [é«˜å¾·åœ°å›¾å¼€æ”¾å¹³å°](https://lbs.amap.com/)
- [é«˜å¾·åœ°å›¾JS APIæ–‡æ¡£](https://lbs.amap.com/api/jsapi-v2/summary)
- [Reactå®˜æ–¹æ–‡æ¡£](https://reactjs.org/)
- [Socket.IOæ–‡æ¡£](https://socket.io/docs/)